<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Word Cloud Visualization</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/jasondavies/d3-cloud/build/d3.layout.cloud.js"></script>
    <style>
        #word-cloud {
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .word {
            font-family: Arial, sans-serif;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .word:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <div id="word-cloud"></div>

    <script>
        // Load the JSON data
        d3.json('word_frequencies.json').then(function(data) {
            // Convert data to array of objects
            const words = Object.entries(data).map(([text, size]) => ({
                text,
                size: Math.sqrt(size) * 5 // Scale the font size using square root for better visualization
            }));

            // Set up the word cloud layout
            const width = 1000;
            const height = 600;

            const layout = d3.layout.cloud()
                .size([width, height])
                .words(words)
                .padding(5)
                .rotate(() => 0) // No rotation for better readability
                .font('Arial')
                .fontSize(d => d.size)
                .on('end', draw);

            // Start the layout
            layout.start();

            // Function to draw the word cloud
            function draw(words) {
                // Color scale
                const color = d3.scaleOrdinal(d3.schemeCategory10);

                // Create the SVG container
                const svg = d3.select('#word-cloud')
                    .append('svg')
                    .attr('width', width)
                    .attr('height', height)
                    .append('g')
                    .attr('transform', `translate(${width/2},${height/2})`);

                // Add words to the cloud
                svg.selectAll('text')
                    .data(words)
                    .enter()
                    .append('text')
                    .attr('class', 'word')
                    .style('font-size', d => `${d.size}px`)
                    .style('font-family', 'Arial')
                    .style('fill', (d, i) => color(i))
                    .attr('text-anchor', 'middle')
                    .attr('transform', d => `translate(${d.x},${d.y})`)
                    .text(d => d.text)
                    .append('title') // Add tooltip
                    .text(d => `${d.text}: ${Math.round((d.size/5)**2)}`); // Show original frequency in tooltip
            }
        }).catch(function(error) {
            console.error('Error loading the JSON file:', error);
        });
    </script>
</body>
</html> 